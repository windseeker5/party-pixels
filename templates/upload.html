<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Share Your Memory - Valérie's 50th Birthday</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <meta name="theme-color" content="#FFD700">
    <meta name="mobile-web-app-capable" content="yes">
</head>
<body class="upload-page">
    <!-- HERO SECTION -->
    <div class="hero-section">
        <div class="celebration-icon">🎉</div>
        <h1 class="hero-title">
            Made with ❤️ for Valérie
        </h1>
        <p class="hero-subtitle">
            Share your memories for her special 50th birthday
        </p>
        <div class="sparkle-decoration">
            <span class="sparkle">✨</span>
            <span class="sparkle">💝</span>
            <span class="sparkle">✨</span>
        </div>
    </div>

    <div class="upload-container">
        <!-- UNIFIED UPLOAD AREA -->
        <div class="upload-area" id="uploadArea">
            <div class="upload-prompt" id="uploadPrompt">
                <div class="upload-icon">📎</div>
                <h2>Drop your memories here!</h2>
                <p>Photos, videos, or music - tap to select files</p>
                <div class="file-types">
                    <span class="file-type">📷 Photos</span>
                    <span class="file-type">🎥 Videos</span>
                    <span class="file-type">🎵 Music</span>
                </div>
                <input type="file" id="fileInput" accept="image/*,video/*,audio/*" multiple capture="environment">
            </div>
            
            <!-- UPLOAD PROGRESS -->
            <div class="upload-progress" id="uploadProgress" style="display: none;">
                <div class="progress-spinner"></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p id="progressText">Preparing upload...</p>
                <div class="upload-details" id="uploadDetails"></div>
            </div>

            <!-- FILE PREVIEWS -->
            <div class="file-previews" id="filePreviews" style="display: none;">
                <!-- Selected files preview will appear here -->
            </div>
        </div>

        <!-- GUEST INFO FORM -->
        <form id="uploadForm" class="upload-form">
            <div class="form-group signature-group">
                <label for="guestName" class="signature-label">
                    <span class="label-icon">✍️</span>
                    Sign your memory
                </label>
                <input type="text" id="guestName" name="guestName" placeholder="Your name (optional)" maxlength="50">
                <div class="input-hint">Let Valérie know who shared this special moment</div>
            </div>

            <div class="form-group signature-group">
                <label for="birthdayNote" class="signature-label">
                    <span class="label-icon">💝</span>
                    Birthday message
                </label>
                <textarea id="birthdayNote" name="birthdayNote" placeholder="Add a birthday message for Valérie... 💝" maxlength="200" rows="3"></textarea>
                <div class="input-hint">Share your wishes and memories</div>
            </div>


            <!-- MUSIC SEARCH SECTION -->
            <div class="music-search-section" id="musicSearchSection">
                <div class="section-divider">
                    <span class="divider-text">🎵 Or Search for Music 🎵</span>
                </div>
                
                <div class="form-group">
                    <label for="musicSearch">
                        <span class="label-icon">🔍</span>
                        Search for songs, artists, or describe a vibe:
                    </label>
                    <div class="search-container">
                        <input type="text" id="musicSearch" placeholder="Search for music..." maxlength="100">
                        <button type="button" id="searchButton" class="search-btn">Search</button>
                    </div>
                    <div class="search-hint">Try: "upbeat party music", "Taylor Swift", or "classic rock"</div>
                </div>

                <!-- SEARCH RESULTS -->
                <div class="search-results" id="searchResults" style="display: none;">
                    <div class="results-header">
                        <h3>🎵 Search Results</h3>
                        <span class="results-count" id="resultsCount"></span>
                    </div>
                    
                    <!-- Local Results -->
                    <div class="local-results" id="localResults">
                        <div class="results-category">
                            <h4>📀 From Party Collection</h4>
                            <div class="results-list" id="localResultsList"></div>
                        </div>
                    </div>
                    
                    <!-- YouTube Results -->
                    <div class="youtube-results" id="youtubeResults">
                        <div class="results-category">
                            <h4>🌐 From YouTube</h4>
                            <div class="results-list" id="youtubeResultsList"></div>
                        </div>
                    </div>
                </div>

                <!-- SEARCH LOADING -->
                <div class="search-loading" id="searchLoading" style="display: none;">
                    <div class="loading-spinner"></div>
                    <p>Searching for music...</p>
                </div>
            </div>


            <button type="submit" class="share-button" id="shareButton" disabled>
                <span class="button-icon">💝</span>
                <span class="button-text">Share Memory</span>
                <div class="button-sparkle"></div>
            </button>
        </form>

        <!-- SUCCESS MESSAGE -->
        <div class="success-message modern-success" id="successMessage" style="display: none;">
            <div class="success-animation">
                <div class="success-icon-large">💝</div>
                <div class="confetti-burst">
                    <span class="confetti">🎊</span>
                    <span class="confetti">✨</span>
                    <span class="confetti">🎉</span>
                    <span class="confetti">💖</span>
                    <span class="confetti">🎈</span>
                    <span class="confetti">⭐</span>
                </div>
            </div>
            <h3 class="success-title">Memory Added! 💕</h3>
            <p id="successDetails" class="success-description">Your special moment is now part of Valérie's birthday collection!</p>
            <div class="success-actions">
                <button onclick="resetForm()" class="action-button primary">Add Another Memory</button>
                <button onclick="viewSlideshow()" class="action-button secondary">View Collection</button>
            </div>
        </div>

        <!-- ERROR MESSAGE -->
        <div class="error-message" id="errorMessage" style="display: none;">
            <div class="error-icon">❌</div>
            <h3>Upload Failed</h3>
            <p id="errorDetails">Please try again.</p>
            <button onclick="hideError()" class="retry-button">Try Again</button>
        </div>
    </div>

    <!-- CONNECTION STATUS -->
    <div class="connection-status mobile" id="connectionStatus">
        <span class="status-dot"></span>
        <span class="status-text">Connecting...</span>
    </div>

    <!-- FOOTER -->
    <footer class="upload-footer">
        <p>💝 Made with love for Valérie's 50th Birthday</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
    <script src="party-upload.js"></script>
</body>
</html>